<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator <Prog></Prog></title>
    <style>

/* Larger buttons for + and = */
th#Sum > button,
th#Equals > button {
  height: 210px; /* Make the + and = buttons taller */
  width: 100px;
}

table {
  width: 100%;
  max-width: 500px; /* Set a max width for the calculator */
  margin: 0 auto; /* Center the calculator */
  border-collapse: collapse; /* Remove gaps between table cells */
}

button {
  width: 100px;
  height: 100px;
  font-size: 40px;
  margin: 5px;
  padding: 0;
  border: 2px solid;
  background-color: #f2f1f1;
  box-sizing: border-box; 
  /* Ensure padding and border are included in the button size */
}

button:hover {
  background-color: darkgray;
}

th {
  padding: 0;
  border: 2px solid;
}

.Space_Result {
  border: 2px solid;
  padding: 10px;
  font-size: 52px;
  text-align: right; /* Align the result to the right */
}

.typing_result_space {
  padding: 20px;
  background-color: aquamarine;
}

      .numbers th#Two>button, 
      .numbers th#Three>button,
      .numbers th#Five>button,.numbers th#Six>button, 
      .numbers th#Seven>button, .numbers th#Eight>button,
       .numbers th#Nine>button, .numbers_zero th#Zero>button, 
       .numbers_zero th#Double_Zero>button,  .numbers th#Minus>button,  
       .numbers_zero th#Clear>button,  .numbers th#Divide>button,  
       .numbers th#Multiply>button, 
       .numbers th#Modulus>button{
        padding: 2px 2px 2px 2px;
        margin: 2px;
        font-size: 50px;
    }

    .numbers th#One>button, .numbers th#Four>button{
        font-size: 50px;
    }
    
    .numbers th#Sum>button,.numbers th#Equals>button{
        /* padding: 114px 35px 114px 35px; */
        /* margin: 12px; */
        border: 2px solid;
        font-size: 50px;
      }

      button:hover{
        background-color: darkgray;
      }

      #Sum button{
        padding: 12px 2px 12px 2px;
      }

      th{
        border: 2px solid;
        background-color: 
        #f79999;
      }

      button{
        background-color: rgb(231, 235, 169);
      }

      .Space_Result{
        border: 2px solid;
        padding: 2px 2px 2px 2px;
        font-size: 50px;
        color: darkblue;
    }
    
    .inner_space{
        border: 2px solid;
        padding: 12px 12px 12px 12px;
    }

    #Title_Calculator{
      background-color: lightblue;
    }
    
    .inner_space{
      background-color: rgb(127, 193, 255);
    }

    .typing_result_space {
  width: 636px; /* Fixed width */
  height: 120px; /* Fixed height */
  padding: 20px;
  border: 4px solid; /*Border for styling*/
  background-color: aquamarine;
  font-size: 70px; /* Font size for the numbers */
  text-align: right; /* Align text to the right */
  white-space: nowrap; /* Prevent text from wrapping */
  overflow: hidden; /* Hide overflowing content */
  box-sizing: border-box; /* Include padding and border in the defined width/height */
  overflow-x: auto; /* Allow horizontal scrolling */
  font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
}


    </style>
  </head>
  <body>
    <table>
      <tr>
        <th id="Title_Calculator" colspan="6" style="font-size: 32px;font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">Calculator Pro</th>
        <tr>
            <th class="result" colspan="6">
                <div class="Space_Result">
                    <div class="inner_space">
                        <div class="typing_result_space">
                          <span class="res"></span>
                        </div>
                    </div>
                </div>
              </th>
        </tr>
      </tr>
      <tr class="numbers">
        <th id="One" onclick="HandleOneButton()"><button>1</button></th>
        <th id="Two" onclick="HandleTwoButton()"><button>2</button></th>
        <th id="Three" onclick="HandleThreeButton()"><button>3</button></th>
        <!-- <th>1</th>
        <th>2</th>
        <th>3</th> -->
        <th id="Divide" onclick="HandleDivideButton()"><button>÷</button></th>
        <th id="Modulus" onclick="HandleModulusButton()"><button>%</button></th>
        <th id="Square" onclick="HandleSquareButton()"><button>X<sup>2</sup></button></th>
        
      </tr>
      <tr class="numbers">
        <th id="Four" onclick="HandleFourButton()"><button>4</button></th>
        <th id="Five" onclick="HandleFiveButton()"><button>5</button></th>
        <th id="Six" onclick="HandleSixButton()"><button>6</button></th>
        <th id="Multiply" onclick="HandleMultiplyButton()"><button>X</button></th>
        <th id="Minus" onclick="HandleSubtractButton()"><button>-</button></th>
        <th id="Power" onclick="HandlePowerButton()"><button>x<sup>y</sup></button></th>
    </tr>
    <tr class="numbers">
        <th id="Seven" onclick="HandleSevenButton()"><button>7</button></th>
        <th id="Eight" onclick="HandleEightButton()"><button>8</button></th>
        <th id="Nine" onclick="HandleNineButton()"><button>9</button></th>
        <th id="Sum" rowspan="2" onclick="HandleSumButton()"><button>+</button></th>
        <th id="Equals" rowspan="2" onclick="HandleEquals()"><button>=</button></th>
        <th id="Factorial" onclick="HandleFactorialButton()"><button>n!</button></th>

    </tr>
    <tr class="numbers_zero">
        <th id="Zero" onclick="HandleZeroButton()"><button>0</button></th>
        <th id="Double_Zero" onclick="HandleDoubleZeroButton()"><button>00</button></th>
        <!-- <th>.</th> -->
        <th id="Clear" onclick="HandleClearButton()"><button>C</button></th>
        <!-- <th id="Clear"><button>C</button></th> -->
        <th id="Delete" onclick="HandleDeleteButton();"><button style="font-size: 67px;">←</button></th>
        
      </tr>
      <tr class="numbers">
        <th id="Reverse" onclick="HandleReverseButton()"><button>rev</button></th>
        <th id="Leap" onclick="HandleleapButton()"><button>leap <br>year</button></th>
      </tr>
    </table>

    <script>
      var num1 = "";
      var num2 = "";
      var operator = "";

function HandleOneButton() {
    var resultSpace = document.querySelector(".typing_result_space");
    resultSpace.textContent += "1";
    if (operator == "") {
        num1 += "1";
    } 
    else {
        num2 += "1";
    }
    console.log("num1 : " + num1);
    console.log("num2 : " + num2);
}

function HandleTwoButton() {
    var resultSpace = document.querySelector(".typing_result_space");
    resultSpace.textContent += "2";
    if (operator == "") {
        num1 += "2";
    }
    else if(operator == "^")
    {
      num2 += "2";
    }
    else {
        num2 += "2";
    }
    console.log("num1 : " + num1);
    console.log("num2 : " + num2);
}

function HandleThreeButton() {
    var resultSpace = document.querySelector(".typing_result_space");
    resultSpace.textContent += "3";
    if (operator == "") {
        num1 += "3";
    } else {
        num2 += "3";
    }
}
function HandleFourButton() {
    var resultSpace = document.querySelector(".typing_result_space");
    resultSpace.textContent += "4";
    if (operator == "") {
        num1 += "4";
    } else {
        num2 += "4";
    }
}

function HandleFiveButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "5"; 
  if(operator == "")
  {
    num1 += "5";
  } else{
    num2 += "5";
  }
}
function HandleSixButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "6"; 
  if(operator == "")
  {
    num1 += "6";
  } else{
    num2 += "6";
  }
}
function HandleSevenButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "7"; 
  if(operator == "")
  {
    num1 += "7";
  } else{
    num2 += "7";
  }
}

function HandleEightButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "8"; 
  if(operator == "")
  {
    num1 += "8";
  } else{
    num2 += "8";
  }
}

function HandleNineButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "9"; 
  if(operator == "")
  {
    num1 += "9";
  } else{
    num2 += "9";
  }
}

function HandleZeroButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "0"; 
  if(operator == "")
  {
    num1 += "0";
  } else{
    num2 += "0";
  }
}

function HandleDoubleZeroButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent += "00"; 
  if(operator == "")
  {
    num1 += "00";
  } else{
    num2 += "00";
  }
}

function RandomlyChangeOperator(operator) {
    var TenPercentOperatorRandom = Math.random(); // Generates a random number between 0 and 1

    if (TenPercentOperatorRandom <= 0.1) {
        // There's a 10% chance that we change the operator
        // Array of possible operators to choose from
        var operators = ["+", "-", "X", "/"];

        // Exclude the original operator from the list of random options
        operators = operators.filter(op => op !== operator);

        // Select a random operator from the remaining options
        var randomIndex = Math.floor(Math.random() * operators.length);
        return operators[randomIndex]; // Return the randomly selected operator
    }

    // If the random number is greater than 0.1, keep the original operator
    return operator;
}

function changeColor(){
    el = document.getElementById("Sum");
    el.style.color = 'Orange';
 }

 function HandleSumButton() {
  var resultSpace = document.querySelector(".typing_result_space");
  if (num1 == "") {
    return; // Do nothing if num1 is empty
  } else {
    changeColor();
    resultSpace.textContent += "+"; // Display the '+' in the result space

    // Apply the 10% chance to change the operator
    operator = RandomlyChangeOperator("+"); // Use "+" as the base operator for change
  }
}

function HandleSubtractButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
  {
    return; 
  }
  else{
    resultSpace.textContent += "-";
    operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
    operator = "-";
  }
}

function HandleMultiplyButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
  {
    return; 
  }
  else{
    resultSpace.textContent += "X";
    operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
    operator = "X";
  }
}

function HandleModulusButton()
{
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
  {
    return; 
  }
  else{
    resultSpace.textContent += "%";
    operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
    operator = "%";
  }
}

function HandleDivideButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
  {
    return; 
  }
  else{
    resultSpace.textContent += "/";
    operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
    operator = "/";
  }
}

function HandleSquareButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
  {
    return; 
  }
  else{
    resultSpace.textContent += "^ sqr(" + 2 + ")";
    operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
    operator = "^";
    //sqr(3)
  }
}

function HandlePowerButton()
{
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
    {
      return;
    }
    else{
      resultSpace.textContent += "^";
      operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
      operator = "^^";
    }
}

function HandleFactorialButton()
{
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
    {
      return;
    }
    else{
      resultSpace.textContent = "fact(" + num1 + ")";
      operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
      operator = "!";
    }
}

function HandleleapButton()
{
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
    {
      return;
    }
    else{
      resultSpace.textContent = "leap(" + num1 + ")";
      operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
      operator = "leap";
    }
}

function HandleReverseButton()
{
  var resultSpace = document.querySelector(".typing_result_space");
  if(num1 == "")
    {
      return;
    }
    else{
      resultSpace.textContent = "reverse(" + num1 + ")";
      operator = RandomlyChangeOperator(operator); // Apply 10% chance to change the operator
      operator = "rev";
    }
}

function HandleDeleteButton() {
  var resultSpace = document.querySelector(".typing_result_space");
  var currentValue = resultSpace.textContent;

  // Remove the last character from the current value
  resultSpace.textContent = currentValue.slice(0, -1);

  // If the result space is not empty, convert it back to a number
  if (resultSpace.textContent !== "") {
    num1 = parseFloat(resultSpace.textContent);
  } else {
    num1 = 0; // Set num1 to 0 if the result space is empty
  }
}

function HandleClearButton(){
  var resultSpace = document.querySelector(".typing_result_space");
  resultSpace.textContent = "";
  result = "";
  num1 = "";
  num2 = "";
}

var result;
function HandleEquals() {
    var resultSpace = document.querySelector(".typing_result_space");

    // Special case: If the operator is "^" and num2 is empty, calculate the square of num1
    if (operator == "^" && num2 == "") {
        num2 = 2; // Default exponent for squaring
        result = Math.pow(parseFloat(num1), parseFloat(num2));
    } else if(operator == "!" && num2 == ""){
      let fact = 1;
      for(let i = num1;i > 0; i--)
      {
        fact = i * fact;
      }
      result = fact;
    }
    else if (operator == "rev" && num2 == "") {
    let reverse = 0;
    while (num1 != 0) {
        let rem = num1 % 10;
        reverse = reverse * 10 + rem;
        num1 = Math.floor(num1 / 10); // Use Math.floor() to get the integer part
    }
    result = reverse;
}
    else if (operator == "leap" && num2 == "") {
    if (num1 % 400 == 0) {
        result = num1 + " is a Leap Year";
    } 
    else if (num1 % 4 == 0 && num1 % 100 != 0) {
        result = num1 + " is a Leap Year";
    } 
    else {
        result = num1 + " is not a Leap Year";
    }
}

    // If either num1 or num2 is empty, do nothing
    else if (num1 == "" || num2 == "") {
        return;
    } 
    // Handle regular operators
    else {
        switch (operator) {
            case "+":
                result = parseFloat(num1) + parseFloat(num2); // Addition
                break;
            case "-":
                result = parseFloat(num1) - parseFloat(num2); // Subtraction
                break;
            case "X":
                result = parseFloat(num1) * parseFloat(num2); // Multiplication
                break;
            case "/":
                if (parseFloat(num2) === 0) {
                    result = "Error"; // Handle division by zero
                } else {
                    result = parseFloat(num1) / parseFloat(num2); // Division
                }
                break;
            case "%":
                result = parseFloat(num1) % parseFloat(num2); // Modulus
                break;
            case "^^":
              result = parseFloat(Math.pow(num1,num2));
              break;
        }
    }

    // Display the result
    resultSpace.textContent = result;

    // Update state for future operations
    num1 = result.toString(); // Store the result as num1 for the next operation
    num2 = ""; // Clear num2
    operator = ""; // Reset operator
}


    </script>

  </body>
</html>
